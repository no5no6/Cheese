# 项目自动化构建工具

## 概述  
  + 它将项目中繁琐、重复的任务变为自动执行的任务，让你的工作更专注于项目实现本身。  
  + 它解决的问题例如：编译、合并、压缩、加密、单元测试等一系列与项目实现本身无关的事物。
  + 如果把工具按类型分可以分为以下三类：
    - 基于任务运行的工具：  
      Grunt、Gulp 它们会自动执行指定的任务，就像流水线，把资源放上去然后通过不同插件进行加工，它们包含活跃的区，丰富的插件，能方便的打造各种工作流。
    - 基于模块化打包的工具：  
      Browserify、Webpack、rollup.js，有过 Node.js 开发经历的应该对模块很熟悉，需要引用组件直接一个 require 就 OK，这类工具就是这个模式，还可以实现按需加载、异步加载模块。
    - 整合型工具：  
      Yeoman、FIS、jdf、Athena、cooking、weflow 使用了多种技术栈实现的脚手架工具，好处是即开即用，缺点就是它们约束了技术选型，并且学习成本相对较高。
  + Grunt 
    - Grunt 是老牌的构建工具，特点是配置驱动，你需要做的就是了解各种插件的功能，然后把配置整合到 Gruntfile.js 中。
    - Grunt 缺点也是配置驱动，当任务非常多的情况下，试图用配置完成所有事简直就是个灾难；再就是它的 I/O 操作也是个弊病，它的每一次任务都需要从磁盘中读取文件，处理完后再写入到磁盘，例如：我想对多个 less 进行预编译、压缩操作，那么 Grunt 的操作为以下操作，这样一来当资源文件较多，任务较复杂的时候性能就是个问题了。
      > 读取 less 文件 -> 编译成 css -> 存储到磁盘 -> 读取 css -> 压缩处理 -> 存储到磁盘
  + Gulp
    - Gulp 特点是代码驱动，写任务就和写普通的 Node.js 代码一样
    - 特点为对文件读取是流式操作（Stream），也就是说一次 I/O 可以处理多个任务，还是 less 的例子，Gulp 的流程就为以下操作，Gulp 作为任务类型的工具没有明显的缺点，唯一的问题可能就是完成相同的任务它需要写的代码更多一些
      > 读取 less 文件 -> 编译成 css -> 压缩处理 -> 存储到磁盘
  + Webpack
    - 把一切都视为模块：不管是 CSS、JS、Image 还是 HTML 都可以互相引用，通过定义 entry.js，对所有依赖的文件进行跟踪，将各个模块通过 loader 和 plugins 处理，然后打包在一起。
    - 按需加载：打包过程中 Webpack 通过 Code Splitting 功能将文件分为多个 chunks，还可以将重复的部分单独提取出来作为 commonChunk，从而实现按需加载。
    - 不足点为
      + 上手比较难：官方文档混乱、配置复杂、难以调试（Webpack2 已经好了很多）对于新手而言需要经历踩坑的过程；
      + 对于 Server 端渲染的多页应用有点力不从心：Webpack 的最初设计就是针对 SPA，所以在处理 Server 端渲染的多页应用时，不管你如何 chunk，总不能真正达到按需加载的地步，往往要去考虑如何提取公共文件才能达到最优状态。

## 构建工具的基础原理
  + [详解](脚手架工作原理.md)


## 案例
  + ### Plop 构建工具
    - [详解](plop.md)  

  + ### Grunt 构建项目基础流程
    - [详解](grunt/grunt.md)
    - [完整代码](grunt/gruntfile.js)

  + ### Gulp 构建项目基础流程
    - [详解](gulp/gulp.md)
    - [完整代码](gulp/gulpfile.js)


## 参考文献
+ [前端工程化——构建工具选型：grunt、gulp、webpack](https://juejin.im/entry/5b5724d05188251aa01647fd)
